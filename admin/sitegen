#!/usr/bin/env bash

# standard invocation of sitegen.py

### <CONFIGURATION> ###
VENV_VERSION="16.0.0"
URL="https://files.pythonhosted.org/packages/33/bc/fa0b5347139cd9564f0d44ebd2b147ac97c36b2403943dbee8a25fd74012/virtualenv-$VENV_VERSION.tar.gz"
### </CONFIGURATION> ###

set -e

source "$(dirname "$0")/common"

USE_PYTHON_3=false

while getopts "t:r:p" OPT
do
    case "$OPT" in
      r)
        VERSION="$OPTARG"
        ;;
      t)
        ISABELLE_TOOL="$OPTARG"
        ;;
      p)
        USE_PYTHON_3=true
        ;;
    esac
done
shift $((OPTIND-1))

set_isabelle_tool

echo "Checking ROOTs ..."
"$ISABELLE_TOOL" afp_check_roots || exit 2

echo "Building Isabelle components ..."

echo "Running sitegen ..."

"$ISABELLE_TOOL" afp_site_gen \
  -f \
  -H "$AFP_ROOT/out/hugo" \
  -O "$AFP_ROOT/web" \
  "$@"
